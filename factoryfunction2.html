<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2ND FF TATTOO</title>
</head>

<body>
    <h1>SECOND FACTORY FUNCTION</h1>
    <script>
        console.log("ðŸ™ŒðŸ™ŒðŸ™Œ##### CONSTRUCTOR PART STARTS HERE #####")

        function School(school, year) {
            this.school = school
            this.year = year
        }
        School.prototype.mySchool = function () {
            console.log(`The name of my school is ${this.school} established in ${this.year}`)
        }
        function Pupil(name, age, school, year) {
            School.call(this, school, year) // connects Pupil constructor to School constructor
            this.name = name
            this.age = age
        }
        Object.setPrototypeOf(Pupil.prototype, School.prototype)  // connects Pupil prototype to School prototype

        const sade = new Pupil("Sade Ogunsanya", 20, "OAU Ife", 1966)
        console.log(sade.school)
        sade.mySchool() // The name of my school is OAU Ife established in 1966

        console.log("                                 ")
        console.log("ðŸ™ŒðŸ™ŒðŸ™Œ##### FACTORY FUNCTION PART STARTS HERE #####")

        function SchoolFF(school, year) {
            mySchool = () => console.log(`The name of my school is ${school} established in ${year}`)

            return { mySchool }
        }

        function PupilFF(name, age, school, year) {
            prototype = SchoolFF(school, year) // connects Pupil ff to School ff
            return Object.assign({}, prototype)
        }

        const malik = PupilFF("Malik", 12, "IDGS", 1960)
        malik.mySchool() // The name of my school is IDGS established in 1960

        console.log("                                 ")
        console.log("ðŸ™ŒðŸ™ŒðŸ™Œ##### GAME PART STARTS HERE #####")


        const fightGame = (name, level) => {
            let health = level * 2
            getName = () => name
            getLevel = () => level

            const die = () => {
                //console.log(`oh no! ${getName()} is dead!`)
            }

            const damage = x => {
                health -= x
                if (health <= 0) {
                    die()
                }
            }

            const attack = (enemy) => {
                if (enemy.getLevel() > level) {
                    console.log(`${enemy.getName()} attacked ${getName()}`)
                    damage(1)
                }
                if (enemy.getLevel() < level) {
                    console.log(`${getName()} attacked ${enemy.getName()}`)
                    enemy.damage(1)
                }
            }

            return { attack, damage, getName, getLevel }
        }

        const adunni = fightGame("Adunni", 3)
        const devil = fightGame("Devil", 10)
        console.log(adunni.getName())
        adunni.attack(devil)

        /*
        const game = (name, level) => {
            const getName = () => name
            const getLevel = () => level
            let health = level * 2

            const die = ()=> {
                // Oh no!
            }

            const damage = x => {
                health -= x
                if (health <= 0){
                    die()
                }
            }

            const attack = (enemy)=>{
                if (enemy.getLevel() > level){
                    damage(1)
                    console.log(enemy.getName() + " attaked " + getName())
                }
                if (level > enemy.getLevel()){
                    enemy.damage(1)
                    console.log(getName() + " attacked " + enemy.getName())
                }
            }

            return { getName, getLevel, damage, attack }
        }

        const aminat = game("Aminat", 10)
        const esu = game("Esu", 5)

        aminat.attack(esu) // Aminat attacked Esu
        */
    </script>
</body>

</html>